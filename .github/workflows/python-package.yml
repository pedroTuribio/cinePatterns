# Arquivo: .github/workflows/python-package.yml

name: Qualidade de Código (CI) # O nome do workflow pode ser em Português

on:
  # Gatilho 1: Quando há um push (empurrar) para a branch principal
  push:
    branches: [ "main" ]
  # Gatilho 2: Quando há uma Pull Request (solicitação de pull) para a branch principal
  pull_request:
    branches: [ "main" ]

jobs:
  build: # Nome do seu job
    runs-on: ubuntu-latest # Onde o código irá rodar
    strategy:
      matrix:
        python-version: ["3.10"] # A versão do Python a ser usada

    steps:
      - uses: actions/checkout@v4
      - name: Configurar Python ${{ matrix.python-version }}
        uses: actions/setup-python@v4
        with:
          python-version: ${{ matrix.python-version }}

      - name: Instalar dependências e ferramentas (Black, Pytest)
        run: |
          python -m pip install --upgrade pip
          pip install black pytest
          # Se você tiver um requirements.txt, descomente:
          # pip install -r requirements.txt
          
      # --- PASSO 1: VERIFICAÇÃO DE CLEAN CODE (Black) ---
      - name: Verificar estilo de código com Black
        run: black --check .
        
      # --- PASSO 2: EXECUÇÃO DE TESTES UNITÁRIOS ---
      - name: Rodar testes (Pytest)
        run: pytest
